# ุฅุตูุงุญ ุฎุทุฃ "Could not find the 'status' column"

## ุงููุดููุฉ
ุนูุฏ ุฅุถุงูุฉ ูุตุฑููุ ูุฏ ุชุธูุฑ ุฑุณุงูุฉ ุฎุทุฃ:
```
Could not find the 'status' column of 'expenses' in the schema cache
```

## ุงูุณุจุจ
ุฌุฏูู `expenses` ูู ูุงุนุฏุฉ ุจูุงูุงุช Supabase ูุง ูุญุชูู ุนูู ุนููุฏ `status` ูุงูุฃุนูุฏุฉ ุงููุฑุชุจุทุฉ ุจู. ูุฐุง ูุญุฏุซ ุนุงุฏุฉ ุนูุฏูุง:
1. ุชู ุฅูุดุงุก ุงูุฌุฏูู ูู ุฅุตุฏุงุฑ ูุฏูู ูู ุงูุณูุฑูุจุช
2. ูู ูุชู ุชุดุบูู Migration ูุฅุถุงูุฉ ุงูุฃุนูุฏุฉ ุงูุฌุฏูุฏุฉ
3. ูู ูุชู ุชุญุฏูุซ Schema Cache ูู Supabase

## ุงูุญู

### ุงูุฎุทูุฉ 1: ุชุดุบูู Migration ูู Supabase

1. ุงูุชุญ ูุดุฑูุนู ูู Supabase Dashboard
2. ุงุฐูุจ ุฅูู **SQL Editor**
3. ุงูุชุญ ููู `migration_add_status_to_expenses.sql` ูู ุงููุดุฑูุน
4. ุงูุณุฎ ุงููุญุชูู ุจุงููุงูู
5. ุงูุตูู ูู SQL Editor
6. ุงุถุบุท **Run**
7. ุชุฃูุฏ ูู ุธููุฑ ุฑุณุงุฆู ุงููุฌุงุญ ูุซู:
   ```
   NOTICE: Added status column to expenses table
   NOTICE: Added approved_by column to expenses table
   NOTICE: Added approved_at column to expenses table
   NOTICE: Added employee_balance_transaction_id column to expenses table
   ```

### ุงูุฎุทูุฉ 2: ุงูุชุญูู ูู ุงูุฃุนูุฏุฉ

ุจุนุฏ ุชุดุบูู Migrationุ ูุฌุจ ุฃู ุชุฑู ูุงุฆูุฉ ุจุฌููุน ุฃุนูุฏุฉ ุฌุฏูู `expenses` ุชุชุถูู:
- `id` (uuid)
- `description` (text)
- `amount` (numeric)
- `category` (text)
- `date` (date)
- `type` (text)
- **`status`** (text) โ **ูุฐุง ุงูุนููุฏ ุงูุฌุฏูุฏ**
- `created_by` (text)
- **`approved_by`** (text) โ **ูุฐุง ุงูุนููุฏ ุงูุฌุฏูุฏ**
- **`approved_at`** (timestamp with time zone) โ **ูุฐุง ุงูุนููุฏ ุงูุฌุฏูุฏ**
- **`employee_balance_transaction_id`** (uuid) โ **ูุฐุง ุงูุนููุฏ ุงูุฌุฏูุฏ**
- `created_at` (timestamp with time zone)
- `updated_at` (timestamp with time zone)

### ุงูุฎุทูุฉ 3: ุชุญุฏูุซ Schema Cache

1. ุงุฐูุจ ุฅูู **Table Editor** ูู Supabase
2. ุงุถุบุท ุนูู ุฌุฏูู `expenses`
3. ูุฐุง ุณูุฌุจุฑ Supabase ุนูู ุชุญุฏูุซ Schema Cache
4. ุฃู ููููู ุฅุนุงุฏุฉ ุชุญููู ุตูุญุฉ Supabase Dashboard ุจุงููุงูู

### ุงูุฎุทูุฉ 4: ุงุฎุชุจุงุฑ ุงูุชุทุจูู

1. ุงูุชุญ ุงูุชุทุจูู ุฃู ูู ุจุชุญุฏูุซ ุงูุตูุญุฉ
2. ุงุฐูุจ ุฅูู ุตูุญุฉ **ุฅุฏุงุฑุฉ ุงููุตุฑููุงุช**
3. ุฌุฑุจ ุฅุถุงูุฉ ูุตุฑูู ุฌุฏูุฏ
4. ูุฌุจ ุฃู ูุนูู ุจุฏูู ุฃุฎุทุงุก

## ุฎุงุตูุฉ ุฎุตู ุงููุตุฑูู ูู ุงูุนูุฏุฉ

### ููู ุชุนููุ

ุนูุฏูุง ูุถูู **ููุธู** (ููุณ ูุฏูุฑ) ูุตุฑููุงู ุฌุฏูุฏุงูุ ูุญุฏุซ ุงูุชุงูู ุชููุงุฆูุงู:

1. โ ูุชู ุญูุธ ุงููุตุฑูู ูู ุฌุฏูู `expenses`
2. โ ูุชู ุชุนููู `status` ุฅูู `'approved'` ุชููุงุฆูุงู
3. โ ูุชู ุฎุตู ุงููุจูุบ ูู ุนูุฏุฉ ุงูููุธู ูู ุฌุฏูู `employee_balance_transactions`
4. โ ูุชู ุฑุจุท ุงููุตุฑูู ุจูุนุงููุฉ ุงูุฎุตู ุนุจุฑ `employee_balance_transaction_id`

### ูุซุงู ุนููู

ุฅุฐุง ูุงู ูุฏู ุงูููุธู "ุฃุจู ุชููู" ุนูุฏุฉ ูุฏุฑูุง **5000 ุฑูุงู**ุ ูุฃุถุงู ูุตุฑูู ุจูุจูุบ **150 ุฑูุงู**:

**ูุจู ุฅุถุงูุฉ ุงููุตุฑูู:**
- ุฑุตูุฏ ุงูุนูุฏุฉ: 5000 ุฑูุงู

**ุจุนุฏ ุฅุถุงูุฉ ุงููุตุฑูู:**
- ุฑุตูุฏ ุงูุนูุฏุฉ: 4850 ุฑูุงู (5000 - 150)
- ุงููุตุฑูู ูุณุฌู ูู ูุงุนุฏุฉ ุงูุจูุงูุงุช
- ูุนุงููุฉ ุงูุฎุตู ูุณุฌูุฉ ูุน ุงูุณุจุจ: "ูุตุฑูู: [ูุตู ุงููุตุฑูู]"

### ููุงุญุธุงุช ูููุฉ

- ๐ **ููููุธููู ููุท**: ุงูุฎุตู ูู ุงูุนูุฏุฉ ูุญุฏุซ ููุท ูููุณุชุฎุฏููู ุจุตูุงุญูุฉ `user` (ููุธู)
- ๐จโ๐ผ **ูููุฏูุฑูู**: ุงููุตุฑููุงุช ุงูุชู ูุถูููุง ุงููุฏูุฑ (`admin`) ูุง ุชูุฎุตู ูู ุฃู ุนูุฏุฉุ ุจู ุชูุณุฌู ููุตุฑููุงุช ุนุงูุฉ ููุดุฑูุฉ
- ๐ **Rollback ุชููุงุฆู**: ุฅุฐุง ูุดู ุงูุฎุตู ูู ุงูุนูุฏุฉุ ูุชู ุญุฐู ุงููุตุฑูู ุชููุงุฆูุงู ูุถูุงู ุชูุงุณู ุงูุจูุงูุงุช
- โ **ููุงููุฉ ุชููุงุฆูุฉ**: ุชู ุฅูุบุงุก ูุธุงู ุงููุฑุงุฌุนุฉุ ุฌููุน ุงููุตุฑููุงุช ูุชู ุงูููุงููุฉ ุนูููุง ุชููุงุฆูุงู

### ุงูููุฏ ุงููุณุคูู

ุงูููุฏ ุงูููุฌูุฏ ูู `src/components/Expenses.tsx` (ุงูุณุทูุฑ 441-476) ูุชุนุงูู ูุน:
- ุงูุชุญูู ูู ุฏูุฑ ุงููุณุชุฎุฏู
- ุฎุตู ุงููุจูุบ ูู ุงูุนูุฏุฉ ููููุธููู
- Rollback ุงููุตุฑูู ุฅุฐุง ูุดู ุงูุฎุตู
- ุชุณุฌูู ุงูุณุจุจ ูุงูุชุงุฑูุฎ

## ุฏุนู ุฅุถุงูู

ุฅุฐุง ุงุณุชูุฑุช ุงููุดููุฉ ุจุนุฏ ุชุทุจูู ูุฐู ุงูุฎุทูุงุช:
1. ุชุญูู ูู ุฃู Migration ุชู ุชุดุบููู ุจูุฌุงุญ
2. ุชุฃูุฏ ูู ูุฌูุฏ ุฌุฏูู `employee_balance_transactions` ูู ูุงุนุฏุฉ ุงูุจูุงูุงุช
3. ุฑุงุฌุน Console ูู ุงููุชุตูุญ ููุญุตูู ุนูู ุชูุงุตูู ุงูุฎุทุฃ
4. ุชูุงุตู ูุน ุงูุฏุนู ุงูููู

---

**ุชู ุงูุชุญุฏูุซ:** ููุงูุฑ 2026
**ุงูุฅุตุฏุงุฑ:** 1.1.0
